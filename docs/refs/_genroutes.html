
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>genroutes &#8212; genroutes 0.0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Welcome to genroutes’s documentation!" href="../index.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="genroutes">
<h1>genroutes<a class="headerlink" href="#genroutes" title="Permalink to this heading">¶</a></h1>
<div class="toctree-wrapper compound">
</div>
<span class="target" id="module-genroutes.generic_routes"></span><dl class="py class">
<dt class="sig sig-object py" id="genroutes.generic_routes.HttpMethods">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">genroutes.generic_routes.</span></span><span class="sig-name descname"><span class="pre">HttpMethods</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">module</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">qualname</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">boundary</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#genroutes.generic_routes.HttpMethods" title="Permalink to this definition">¶</a></dt>
<dd><p>HTTP Methods defining access modes for gen routes</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="genroutes.generic_routes.Routes">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">genroutes.generic_routes.</span></span><span class="sig-name descname"><span class="pre">Routes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">session</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">sessionmaker</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">auth_route</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#genroutes.generic_routes.Routes" title="Permalink to this definition">¶</a></dt>
<dd><p>Crud routes generator for FastAPI projects using SQLAlchemy
Generate crud routes using pydantic schemas and their corresponding SQLAlchemy models
The example below shows genroutes in use for the creation of crud routes for the <code class="docutils literal notranslate"><span class="pre">User</span></code> moodel</p>
<p>e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">fastapi</span> <span class="kn">import</span> <span class="n">FastAPI</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span><span class="p">,</span> <span class="n">Column</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">String</span>
<span class="kn">from</span> <span class="nn">genroutes</span> <span class="kn">import</span> <span class="n">Routes</span><span class="p">,</span> <span class="n">HttpMethods</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">sessionmaker</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.ext.declarative</span> <span class="kn">import</span> <span class="n">declarative_base</span>
<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>


<span class="n">SQLALCHEMY_DATABASE_URL</span> <span class="o">=</span> <span class="s2">&quot;postgresql://user:password@postgresserver/db&quot;</span>
<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span>
    <span class="n">SQLALCHEMY_DATABASE_URL</span><span class="p">,</span> <span class="n">connect_args</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;check_same_thread&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">}</span>
<span class="p">)</span>
<span class="n">SessionLocal</span> <span class="o">=</span> <span class="n">sessionmaker</span><span class="p">(</span><span class="n">autocommit</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">autoflush</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
<span class="n">Base</span> <span class="o">=</span> <span class="n">declarative_base</span><span class="p">()</span>


<span class="n">app</span> <span class="o">=</span> <span class="n">FastAPI</span><span class="p">(</span><span class="n">swagger_ui_parameters</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;defaultModelsExpandDepth&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">})</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">home</span><span class="p">():</span>
    <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;home&#39;</span><span class="p">:</span> <span class="s1">&#39;welcome&#39;</span><span class="p">}</span>

<span class="k">class</span> <span class="nc">User</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s2">&quot;Users&quot;</span>

    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;user_id&quot;</span><span class="p">,</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">index</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
    <span class="n">username</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">,</span> <span class="n">nullable</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">unique</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
    <span class="n">email</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">,</span> <span class="n">nullable</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">unique</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
    <span class="n">password</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;password_hash&quot;</span><span class="p">,</span> <span class="n">String</span><span class="p">,</span> <span class="n">nullable</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">UserEntity</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">username</span> <span class="p">:</span> <span class="nb">str</span>
    <span class="n">email</span> <span class="p">:</span> <span class="nb">str</span>
    <span class="n">password</span> <span class="p">:</span> <span class="nb">str</span>

<span class="sd">&#39;&#39;&#39;Create crud routes for User model / UserEntity schema combo&#39;&#39;&#39;</span>
<span class="n">routes</span> <span class="o">=</span> <span class="n">Routes</span><span class="p">(</span><span class="n">SessionLocal</span><span class="p">,</span> <span class="n">auth_route</span><span class="o">=</span><span class="s1">&#39;auth&#39;</span><span class="p">)</span>
<span class="n">user_routes</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">get_router</span><span class="p">(</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">User</span><span class="p">,</span> <span class="n">UserEntity</span><span class="p">,</span> <span class="n">UserEntity</span><span class="p">,</span>
            <span class="n">response_exclude</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;password&quot;</span><span class="p">],</span>
            <span class="n">access_mode</span><span class="o">=</span><span class="n">HttpMethods</span><span class="o">.</span><span class="n">NO_CREATE</span><span class="p">,</span> <span class="n">id_field</span> <span class="o">=</span> <span class="s1">&#39;id&#39;</span><span class="p">)</span>

<span class="sd">&#39;&#39;&#39;Add crud router to app&#39;&#39;&#39;</span>
<span class="n">app</span><span class="o">.</span><span class="n">include_router</span><span class="p">(</span><span class="n">router</span><span class="o">=</span><span class="n">user_routes</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="genroutes.generic_routes.Routes.add_router">
<span class="sig-name descname"><span class="pre">add_router</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">app</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">BaseModel</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema_create</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">BaseModel</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#genroutes.generic_routes.Routes.add_router" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate router and add to FastAPI app.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>app</strong> – FastAPI app.</p></li>
<li><p><strong>path</strong> – endpoint for routes.</p></li>
<li><p><strong>model</strong> – SQLAlchemy model representing data table structure.</p></li>
<li><p><strong>schema</strong> – corresponding pydantic schema for model.</p></li>
<li><p><strong>schema_create</strong> – pydantic schema to be used for data creation (<code class="docutils literal notranslate"><span class="pre">POST</span></code> HTTPMethod).</p></li>
<li><p><strong>**kwargs</strong> – see below.</p></li>
</ul>
</dd>
</dl>
<p>:Keyword Arguments:.</p>
<blockquote>
<div><ul class="simple">
<li><p><em>response_exclude</em> (<code class="docutils literal notranslate"><span class="pre">list</span></code>) – list of fields to be excluded from response.</p></li>
<li><p><em>access_mode</em> (<code class="docutils literal notranslate"><span class="pre">dict</span></code>) – dict of HTTPMethods to be generated (e.g. GET, POST)</p></li>
</ul>
</div></blockquote>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="genroutes.generic_routes.Routes.get_router">
<span class="sig-name descname"><span class="pre">get_router</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">BaseModel</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema_create</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">BaseModel</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#genroutes.generic_routes.Routes.get_router" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate and return router.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> – endpoint for routes.</p></li>
<li><p><strong>model</strong> – SQLAlchemy model representing data table structure.</p></li>
<li><p><strong>schema</strong> – corresponding pydantic schema for model.</p></li>
<li><p><strong>schema_create</strong> – pydantic schema to be used for data creation (<code class="docutils literal notranslate"><span class="pre">POST</span></code> HTTPMethod).</p></li>
<li><p><strong>**kwargs</strong> – see below.</p></li>
</ul>
</dd>
</dl>
<p>:Keyword Arguments:.</p>
<blockquote>
<div><ul class="simple">
<li><p><em>response_exclude</em> (<code class="docutils literal notranslate"><span class="pre">list</span></code>) – list of fields to be excluded from response.</p></li>
<li><p><em>access_mode</em> (<code class="docutils literal notranslate"><span class="pre">dict</span></code>) – dict of HTTPMethods to be generated (e.g. GET, POST).</p></li>
</ul>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>router (<code class="docutils literal notranslate"><span class="pre">APIRouter</span></code>)</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="genroutes.generic_routes.create">
<span class="sig-prename descclassname"><span class="pre">genroutes.generic_routes.</span></span><span class="sig-name descname"><span class="pre">create</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Session</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key_attribute</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#genroutes.generic_routes.create" title="Permalink to this definition">¶</a></dt>
<dd><p>Create records of model on datasource using data object
<code class="docutils literal notranslate"><span class="pre">key_attribute</span></code> is used to check for duplicates before creation</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="genroutes.generic_routes.create_any">
<span class="sig-prename descclassname"><span class="pre">genroutes.generic_routes.</span></span><span class="sig-name descname"><span class="pre">create_any</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Session</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#genroutes.generic_routes.create_any" title="Permalink to this definition">¶</a></dt>
<dd><p>Create records without validating against unique fields</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="genroutes.generic_routes.delete">
<span class="sig-prename descclassname"><span class="pre">genroutes.generic_routes.</span></span><span class="sig-name descname"><span class="pre">delete</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Session</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">attribute</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#genroutes.generic_routes.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete all records of model from datasource filtered by ‘attribute = value’</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="genroutes.generic_routes.method_name">
<span class="sig-prename descclassname"><span class="pre">genroutes.generic_routes.</span></span><span class="sig-name descname"><span class="pre">method_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#genroutes.generic_routes.method_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Rename methods with decorator</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="genroutes.generic_routes.read">
<span class="sig-prename descclassname"><span class="pre">genroutes.generic_routes.</span></span><span class="sig-name descname"><span class="pre">read</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Session</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#genroutes.generic_routes.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Read all records of model from datasource</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="genroutes.generic_routes.read_by_attribute">
<span class="sig-prename descclassname"><span class="pre">genroutes.generic_routes.</span></span><span class="sig-name descname"><span class="pre">read_by_attribute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Session</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">attribute</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#genroutes.generic_routes.read_by_attribute" title="Permalink to this definition">¶</a></dt>
<dd><p>Read records of model from datasource filtered by ‘attribute = value’</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="genroutes.generic_routes.update">
<span class="sig-prename descclassname"><span class="pre">genroutes.generic_routes.</span></span><span class="sig-name descname"><span class="pre">update</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Session</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">attribute</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#genroutes.generic_routes.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Update all records of model from datasource filtered by ‘attribute = value’</p>
</dd></dl>

<section id="class-routes">
<h2><em>class</em> <code class="docutils literal notranslate"><span class="pre">Routes</span></code><a class="headerlink" href="#class-routes" title="Permalink to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">genroutes.generic_routes.</span></span><span class="sig-name descname"><span class="pre">Routes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">session</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">sessionmaker</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">auth_route</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Crud routes generator for FastAPI projects using SQLAlchemy
Generate crud routes using pydantic schemas and their corresponding SQLAlchemy models
The example below shows genroutes in use for the creation of crud routes for the <code class="docutils literal notranslate"><span class="pre">User</span></code> moodel</p>
<p>e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">fastapi</span> <span class="kn">import</span> <span class="n">FastAPI</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span><span class="p">,</span> <span class="n">Column</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">String</span>
<span class="kn">from</span> <span class="nn">genroutes</span> <span class="kn">import</span> <span class="n">Routes</span><span class="p">,</span> <span class="n">HttpMethods</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">sessionmaker</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.ext.declarative</span> <span class="kn">import</span> <span class="n">declarative_base</span>
<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>


<span class="n">SQLALCHEMY_DATABASE_URL</span> <span class="o">=</span> <span class="s2">&quot;postgresql://user:password@postgresserver/db&quot;</span>
<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span>
    <span class="n">SQLALCHEMY_DATABASE_URL</span><span class="p">,</span> <span class="n">connect_args</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;check_same_thread&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">}</span>
<span class="p">)</span>
<span class="n">SessionLocal</span> <span class="o">=</span> <span class="n">sessionmaker</span><span class="p">(</span><span class="n">autocommit</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">autoflush</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
<span class="n">Base</span> <span class="o">=</span> <span class="n">declarative_base</span><span class="p">()</span>


<span class="n">app</span> <span class="o">=</span> <span class="n">FastAPI</span><span class="p">(</span><span class="n">swagger_ui_parameters</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;defaultModelsExpandDepth&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">})</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">home</span><span class="p">():</span>
    <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;home&#39;</span><span class="p">:</span> <span class="s1">&#39;welcome&#39;</span><span class="p">}</span>

<span class="k">class</span> <span class="nc">User</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s2">&quot;Users&quot;</span>

    <span class="nb">id</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;user_id&quot;</span><span class="p">,</span><span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">index</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
    <span class="n">username</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">,</span> <span class="n">nullable</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">unique</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
    <span class="n">email</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="n">String</span><span class="p">,</span> <span class="n">nullable</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">unique</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
    <span class="n">password</span> <span class="o">=</span> <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;password_hash&quot;</span><span class="p">,</span> <span class="n">String</span><span class="p">,</span> <span class="n">nullable</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">UserEntity</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">username</span> <span class="p">:</span> <span class="nb">str</span>
    <span class="n">email</span> <span class="p">:</span> <span class="nb">str</span>
    <span class="n">password</span> <span class="p">:</span> <span class="nb">str</span>

<span class="sd">&#39;&#39;&#39;Create crud routes for User model / UserEntity schema combo&#39;&#39;&#39;</span>
<span class="n">routes</span> <span class="o">=</span> <span class="n">Routes</span><span class="p">(</span><span class="n">SessionLocal</span><span class="p">,</span> <span class="n">auth_route</span><span class="o">=</span><span class="s1">&#39;auth&#39;</span><span class="p">)</span>
<span class="n">user_routes</span> <span class="o">=</span> <span class="n">routes</span><span class="o">.</span><span class="n">get_router</span><span class="p">(</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="n">User</span><span class="p">,</span> <span class="n">UserEntity</span><span class="p">,</span> <span class="n">UserEntity</span><span class="p">,</span>
            <span class="n">response_exclude</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;password&quot;</span><span class="p">],</span>
            <span class="n">access_mode</span><span class="o">=</span><span class="n">HttpMethods</span><span class="o">.</span><span class="n">NO_CREATE</span><span class="p">,</span> <span class="n">id_field</span> <span class="o">=</span> <span class="s1">&#39;id&#39;</span><span class="p">)</span>

<span class="sd">&#39;&#39;&#39;Add crud router to app&#39;&#39;&#39;</span>
<span class="n">app</span><span class="o">.</span><span class="n">include_router</span><span class="p">(</span><span class="n">router</span><span class="o">=</span><span class="n">user_routes</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">add_router</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">app</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">BaseModel</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema_create</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">BaseModel</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Generate router and add to FastAPI app.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>app</strong> – FastAPI app.</p></li>
<li><p><strong>path</strong> – endpoint for routes.</p></li>
<li><p><strong>model</strong> – SQLAlchemy model representing data table structure.</p></li>
<li><p><strong>schema</strong> – corresponding pydantic schema for model.</p></li>
<li><p><strong>schema_create</strong> – pydantic schema to be used for data creation (<code class="docutils literal notranslate"><span class="pre">POST</span></code> HTTPMethod).</p></li>
<li><p><strong>**kwargs</strong> – see below.</p></li>
</ul>
</dd>
</dl>
<p>:Keyword Arguments:.</p>
<blockquote>
<div><ul class="simple">
<li><p><em>response_exclude</em> (<code class="docutils literal notranslate"><span class="pre">list</span></code>) – list of fields to be excluded from response.</p></li>
<li><p><em>access_mode</em> (<code class="docutils literal notranslate"><span class="pre">dict</span></code>) – dict of HTTPMethods to be generated (e.g. GET, POST)</p></li>
</ul>
</div></blockquote>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">get_router</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">BaseModel</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema_create</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">BaseModel</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Generate and return router.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> – endpoint for routes.</p></li>
<li><p><strong>model</strong> – SQLAlchemy model representing data table structure.</p></li>
<li><p><strong>schema</strong> – corresponding pydantic schema for model.</p></li>
<li><p><strong>schema_create</strong> – pydantic schema to be used for data creation (<code class="docutils literal notranslate"><span class="pre">POST</span></code> HTTPMethod).</p></li>
<li><p><strong>**kwargs</strong> – see below.</p></li>
</ul>
</dd>
</dl>
<p>:Keyword Arguments:.</p>
<blockquote>
<div><ul class="simple">
<li><p><em>response_exclude</em> (<code class="docutils literal notranslate"><span class="pre">list</span></code>) – list of fields to be excluded from response.</p></li>
<li><p><em>access_mode</em> (<code class="docutils literal notranslate"><span class="pre">dict</span></code>) – dict of HTTPMethods to be generated (e.g. GET, POST).</p></li>
</ul>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>router (<code class="docutils literal notranslate"><span class="pre">APIRouter</span></code>)</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
</section>
<section id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this heading">¶</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="../genindex.html"><span class="std std-ref">Index</span></a></p></li>
<li><p><a class="reference internal" href="../py-modindex.html"><span class="std std-ref">Module Index</span></a></p></li>
<li><p><a class="reference internal" href="../search.html"><span class="std std-ref">Search Page</span></a></p></li>
</ul>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">genroutes</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">genroutes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#genroutes.generic_routes.HttpMethods"><code class="docutils literal notranslate"><span class="pre">HttpMethods</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#genroutes.generic_routes.Routes"><code class="docutils literal notranslate"><span class="pre">Routes</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#genroutes.generic_routes.create"><code class="docutils literal notranslate"><span class="pre">create()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#genroutes.generic_routes.create_any"><code class="docutils literal notranslate"><span class="pre">create_any()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#genroutes.generic_routes.delete"><code class="docutils literal notranslate"><span class="pre">delete()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#genroutes.generic_routes.method_name"><code class="docutils literal notranslate"><span class="pre">method_name()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#genroutes.generic_routes.read"><code class="docutils literal notranslate"><span class="pre">read()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#genroutes.generic_routes.read_by_attribute"><code class="docutils literal notranslate"><span class="pre">read_by_attribute()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#genroutes.generic_routes.update"><code class="docutils literal notranslate"><span class="pre">update()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#class-routes"><em>class</em> <code class="docutils literal notranslate"><span class="pre">Routes</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#indices-and-tables">Indices and tables</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="../index.html" title="previous chapter">Welcome to genroutes’s documentation!</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, Tokoni Kemenanabo.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 6.1.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../_sources/refs/_genroutes.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>